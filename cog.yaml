# Configuration for Cog ⚙️
# Reference: https://cog.run/yaml

build:
  gpu: true
  # Updated from CUDA 11.8
  cuda: "12.4"

  # a list of ubuntu apt packages to install
  system_packages:
    - "libgl1"
    - "git"

  python_version: "3.10"

  python_requirements: requirements.txt

  # commands run after the environment is set up
  run:
    - huggingface-cli download black-forest-labs/FLUX.1-dev flux1-dev.safetensors --local-dir models/flux_base_models --token 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
    - huggingface-cli download black-forest-labs/FLUX.1-dev ae.safetensors --local-dir models/flux_base_models --token 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
    - huggingface-cli download comfyanonymous/flux_text_encoders clip_l.safetensors --local-dir models/flux_base_models --token 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
    - huggingface-cli download comfyanonymous/flux_text_encoders t5xxl_fp16.safetensors --local-dir models/flux_base_models --token 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
    - ls -l models/flux_base_models

predict: "deploy_replicate.py:Predictor"
